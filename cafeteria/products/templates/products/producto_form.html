{% extends "base.html" %}
{% load producto_templatetags %}

{% block content %}
<div class="container mt-4">
    <h1 class="mb-4">
        {% if form.instance.pk %}
            Editar Producto
        {% else %}
            Crear Nuevo Producto
        {% endif %}
    </h1>

    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        
        <div class="form-group">
            <label for="{{ form.nombre.id_for_label }}">Nombre</label>
            {{ form.nombre|add_class:"form-control" }}
            {% if form.nombre.errors %}
                <div class="text-danger">{{ form.nombre.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="{{ form.precio.id_for_label }}">Precio</label>
            {{ form.precio|add_class:"form-control" }}
            {% if form.precio.errors %}
                <div class="text-danger">{{ form.precio.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="{{ form.categoria.id_for_label }}">Categoría</label>
            {{ form.categoria|add_class:"form-control" }}
            {% if form.categoria.errors %}
                <div class="text-danger">{{ form.categoria.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="{{ form.descripcion.id_for_label }}">Descripción</label>
            {{ form.descripcion|add_class:"form-control" }}
        </div>

        <div class="form-group">
            <label for="{{ form.esta_disponible.id_for_label }}">
                {{ form.esta_disponible }} Disponible
            </label>
        </div>

        <div class="form-group">
            <label for="{{ form.imagen.id_for_label }}">Imagen</label>
            {{ form.imagen|add_class:"form-control-file" }}
            {% if form.imagen.value %}
                <small class="form-text text-muted">
                    Imagen actual: {{ form.imagen.value }}
                </small>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="{{ form.tiempo_preparacion.id_for_label }}">Tiempo de Preparación (minutos)</label>
            {{ form.tiempo_preparacion|add_class:"form-control" }}
        </div>

        <div class="mt-3">
            <button type="submit" class="btn btn-primary">
                {% if form.instance.pk %}
                    Actualizar Producto
                {% else %}
                    Crear Producto
                {% endif %}
            </button>
            <a href="{% url 'products:producto_list' %}" class="btn btn-secondary ml-2">Cancelar</a>
        </div>
    </form>
</div>
{% endblock %}